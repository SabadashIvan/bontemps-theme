{% if product.images.size > 1 %}
  <div id="product-image-carousel" class="carousel slide responsive-image__wrapper" data-interval="false" data-ride="carousel">
    <div class="carousel-inner">
    {% for image in product.images %}
    {%- assign img_url = image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
      <div class="carousel-item lazyload {% if forloop.first %}active{% endif %} product-image" >
        <img id="{{ img_id }}"
          class="feature-row__image {{ img_class }} lazyload{% unless featured_image == image %} lazypreload{% endunless %}"
          data-src="{{ image_url }}"
          data-widths="[180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
          data-aspectratio="{{ image.aspect_ratio }}"
          data-sizes="auto"
          tabindex="-1"
          alt="{{ image.alt | escape }}">
      </div>
    {% endfor %}
    </div>
    <div class="product-carousel-control-box">
      <ol class="product-carousel-indicators carousel-indicators">
        {% for image in product.images %}
          <li data-target="#product-image-carousel"
          data-slide-to="{{ forloop.index0 }}"
          class="{% if forloop.first %}active{% endif %} product-image-indicator" style="background-image: url('{{ image | img_url: '600x600' }}')">
        </li>
        {% endfor %}
          <a class="carousel-control-prev" href="#product-image-carousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#product-image-carousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
      </ol>
   </div>
  </div>
  {% else %}
  {% for image in product.images %}
    {% capture wrapper_class %}
      {%- unless featured_image == image -%}
        hide
      {%- endunless -%}
    {% endcapture %}
    {% include 'responsive-image' with
      image: image,
      max_width: 700,
      max_height: 650,
      image_attributes: "data-product-featured-image",
      wrapper_class: wrapper_class,
      wrapper_attributes: "data-product-image-wrapper",
    %}
  {% endfor %}
  {% endif %}
  {{ "bcSwipe.min.js" | asset_url | script_tag }}
<script>
$('.carousel').bcSwipe({ threshold: 50 });
</script>